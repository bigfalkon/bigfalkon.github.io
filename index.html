<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karakter Galerisi - Final</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Metamorphous&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        :root {
            --md-sys-color-primary-rgb: 189, 179, 255;
            --md-sys-color-primary: rgb(var(--md-sys-color-primary-rgb));
            --md-sys-color-on-primary: #2d235c;
            --md-sys-color-primary-container: #443a74;
            --md-sys-color-on-primary-container: #e6deff;

            --md-sys-color-fusion-rgb: 224, 179, 255;
            --md-sys-color-fusion: rgb(var(--md-sys-color-fusion-rgb));
            --md-sys-color-on-fusion: #490071;
            --md-sys-color-fusion-container: #63009b;
            --md-sys-color-on-fusion-container: #f4d9ff;

            --md-sys-color-background: #131318;
            --md-sys-color-on-background: #e5e1e6;
            --md-sys-color-surface-container: #201f25;
            --md-sys-color-surface-container-high: #2a2830;
            --md-sys-color-on-surface: #e5e1e6;
            --md-sys-color-on-surface-variant: #c8c4d0;
            --md-sys-color-outline-variant: #48454e;
        }

        body.modal-open { overflow: hidden; }
        body {
            font-family: 'Manrope', sans-serif;
            background-color: var(--md-sys-color-background);
            color: var(--md-sys-color-on-background);
            position: relative;
            overflow-x: hidden;
        }
        body::before {
            content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: 
                radial-gradient(circle at 15% 25%, rgba(var(--md-sys-color-primary-rgb), 0.15) 0%, transparent 40%),
                radial-gradient(circle at 85% 65%, rgba(var(--md-sys-color-fusion-rgb), 0.12) 0%, transparent 45%);
            z-index: -1;
            animation: aurora-flow 20s infinite alternate ease-in-out;
        }
        @keyframes aurora-flow {
            from { transform: translate(0, 0) rotate(0deg) scale(1.2); }
            to { transform: translate(5vw, -5vh) rotate(10deg) scale(1.2); }
        }

        .control-panel {
            background-color: rgba(27, 27, 32, 0.7); 
            backdrop-filter: blur(12px); 
            -webkit-backdrop-filter: blur(12px); 
            border: 1px solid rgba(146, 143, 153, 0.2);
        }
        .chip {
            display: inline-flex; align-items: center; justify-content: center; gap: 8px;
            padding: 8px 16px; border-radius: 20px; font-weight: 600;
            border: 1px solid var(--md-sys-color-outline-variant);
            background-color: var(--md-sys-color-surface-container-high);
            color: var(--md-sys-color-on-surface-variant);
            transition: all 0.2s ease-in-out;
        }
        .chip:hover {
            background-color: rgba(255, 255, 255, 0.08);
        }
        .chip.selected {
            background-color: var(--md-sys-color-primary);
            color: var(--md-sys-color-on-primary);
            border-color: var(--md-sys-color-primary);
            font-weight: 700;
        }

        #character-grid { display: grid; gap: 1.5rem; justify-content: center; }
        .character-card {
            background-color: var(--md-sys-color-surface-container);
            border-radius: 18px; box-shadow: 0 4px 8px rgba(0,0,0,0.25);
            overflow: hidden; position: relative; opacity: 0;
            transform: translateY(30px) scale(0.98);
            animation: card-fade-in 0.6s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
            transition: transform 0.4s cubic-bezier(0.165, 0.84, 0.44, 1), box-shadow 0.4s ease;
        }
        @keyframes card-fade-in { to { opacity: 1; transform: translateY(0) scale(1); } }
        .character-card:hover { box-shadow: 0 8px 16px rgba(0,0,0,0.3); }
        .character-card-image-wrapper { aspect-ratio: 3 / 4; width: 100%; overflow: hidden; border-radius: 18px; }
        .character-card-image { object-fit: cover; width: 100%; height: 100%; transition: transform 0.6s cubic-bezier(0.165, 0.84, 0.44, 1); }
        .character-card:hover .character-card-image { transform: scale(1.1); }
        .character-name { color: var(--md-sys-color-on-surface); }
        
        .fusion-card .character-name { color: var(--md-sys-color-on-fusion-container); }
        .fusion-stars .material-symbols-outlined { animation: star-glow-pulse 1.5s infinite alternate; }
        @keyframes star-glow-pulse {
            from { text-shadow: 0 0 4px #fff, 0 0 8px var(--md-sys-color-fusion), 0 0 12px var(--md-sys-color-fusion); transform: scale(1); }
            to { text-shadow: 0 0 8px #fff, 0 0 16px var(--md-sys-color-fusion), 0 0 24px var(--md-sys-color-fusion); transform: scale(1.1); }
        }
        
        .font-fantastical-fusion { font-family: 'Metamorphous', serif; }

        .m3-dialog-backdrop { z-index: 1000; }
        .m3-dialog-container {
            background-color: rgba(32, 31, 37, 0.85);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(146, 143, 153, 0.2);
            border-radius: 28px; box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            height: 100%;
            max-height: 90vh; max-width: 95vw; width: 1200px;
            display: flex; flex-direction: column;
            opacity: 0; transform: scale(0.95) translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            position: relative;
        }
        .m3-dialog-content { overflow-y: auto; min-height: 0; }
        .m3-dialog-container.visible { opacity: 1; transform: scale(1) translateY(0); }
        .m3-dialog-footer { display:flex; justify-content: space-between; align-items: center; }
        .modal-nav-button { display: flex; align-items: center; gap: 8px; color: var(--md-sys-color-on-surface-variant); border-radius: 99px; padding: 4px; }
        
        .fusion-modal-background { position: relative; overflow: hidden; }
        .fusion-modal-background::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at 50% 100%, rgba(var(--md-sys-color-fusion-rgb), 0.6) 0%, transparent 70%);
            animation: prism-pulse 5s infinite alternate ease-in-out;
            z-index: -1;
        }
        @keyframes prism-pulse { from { transform: scale(2); opacity: 1; } to { transform: scale(1.5); opacity: 1; } }
        .fusion-partner-card { border: 2px solid var(--md-sys-color-fusion); }
        .enlarged-image-container { z-index: 1100; position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background-color: rgba(0,0,0,0.85); }
        .enlarged-image { max-width: 96%; max-height: 96%; object-fit: contain; }
        .icon-button { display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; border-radius: 50%; background-color: transparent; color: var(--md-sys-color-on-surface-variant); cursor: pointer; transition: all 0.2s; }
        .icon-button:hover { background-color: rgba(var(--md-sys-color-primary-rgb), 0.08); }
        .ripple-effect { position: relative; overflow: hidden; }
        .ripple { position: absolute; border-radius: 50%; background-color: rgba(255, 255, 255, 0.3); transform: scale(0); animation: ripple-animation 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94); pointer-events: none; }
        @keyframes ripple-animation { to { transform: scale(4); opacity: 0; } }
        #character-grid.grid-fade-out { opacity: 0; transition: opacity 0.2s ease-out; }
        .modal-transform-paused { transform: none !important; }

        #fitToScreenToggleBtn.active {
            background-color: var(--md-sys-color-primary-container);
            color: var(--md-sys-color-on-primary-container);
        }
        #fitToScreenToggleBtn.active:hover {
            background-color: var(--md-sys-color-primary);
        }

        .search-result-card {
            display: flex; align-items: center; gap: 1rem; padding: 0.75rem;
            border-radius: 12px; background-color: var(--md-sys-color-surface-container);
            transition: all 0.2s ease-in-out; cursor: pointer;
        }
        .search-result-card:hover {
            background-color: var(--md-sys-color-surface-container-high);
            transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        #search-results-grid {
             display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        }
           #search-input:focus {
            border-color: var(--md-sys-color-primary);
        }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8">

    <div id="app" class="max-w-screen-2xl mx-auto">
        
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-extrabold" style="color: var(--md-sys-color-primary);">
                Karakter Galerisi
                <span id="easter-egg-indicator" class="material-symbols-outlined text-yellow-400 hidden ml-2 align-middle cursor-pointer" style="font-size: 2.5rem;">auto_awesome</span>
            </h1>
            <p class="text-lg mt-2" style="color: var(--md-sys-color-on-surface-variant);">Evrenin Kahramanlarını Keşfet</p>
        </header>

        <div class="control-panel sticky top-4 z-50 flex flex-col sm:flex-row items-center justify-center gap-4 mb-8 p-3 rounded-2xl shadow-lg">
            
            <div class="flex flex-wrap justify-center items-center gap-2">
                <button id="open-search-btn" class="chip ripple-effect">
                    <span class="material-symbols-outlined">search</span>
                </button>
                <div class="relative" id="filter-container">
                    <button id="filter-toggle-btn" class="chip ripple-effect selected">
                        <span id="filter-label">Tümü</span>
                    </button>
                    <div id="filter-menu" class="hidden absolute top-full left-1/2 -translate-x-1/2 mt-2 w-48 rounded-xl shadow-lg p-2 z-50" style="background-color: var(--md-sys-color-surface-container-high); border: 1px solid var(--md-sys-color-outline-variant);">
                        <button data-filter="all" class="w-full text-left px-3 py-2 rounded-lg text-sm font-medium hover:bg-white/10 flex items-center gap-2">Tümü</button>
                        <button data-filter="1-star" class="w-full text-left px-3 py-2 rounded-lg text-sm font-medium hover:bg-white/10 flex items-center gap-2">1★</button>
                        <button data-filter="2-star" class="w-full text-left px-3 py-2 rounded-lg text-sm font-medium hover:bg-white/10 flex items-center gap-2">2★</button>
                        <button data-filter="3-star" class="w-full text-left px-3 py-2 rounded-lg text-sm font-medium hover:bg-white/10 flex items-center gap-2">3★</button>
                        <button data-filter="fusion" class="w-full text-left px-3 py-2 rounded-lg text-sm font-medium hover:bg-white/10 flex items-center gap-2">4★</button>
                    </div>
                </div>
                <button id="easter-egg-filter-btn" class="chip ripple-effect hidden">
                    <span class="material-symbols-outlined text-yellow-500">auto_awesome</span>
                    <span>Sırlar</span>
                </button>
                <div class="flex items-center rounded-full overflow-hidden" style="border: 1px solid var(--md-sys-color-outline-variant); background-color: var(--md-sys-color-surface-container-high);">
                    <button id="zoom-out-btn" class="p-2 ripple-effect transition-colors duration-200 hover:bg-white/10" aria-label="Galeri Kartlarını Küçült">
                        <span class="material-symbols-outlined flex items-center">zoom_out</span>
                    </button>
                    <span id="current-size-label" class="px-3 text-sm font-semibold border-x" style="border-color: var(--md-sys-color-outline-variant);">3</span>  
                    <button id="zoom-in-btn" class="p-2 ripple-effect transition-colors duration-200 hover:bg-white/10" aria-label="Galeri Kartlarını Büyüt">
                        <span class="material-symbols-outlined flex items-center">zoom_in</span>
                    </button>
                </div>
                <button id="fitToScreenToggleBtn" class="chip ripple-effect" aria-label="Daha Fazla Sığdır Modu">
                    <span class="material-symbols-outlined">auto_awesome_mosaic</span>
                </button>
            </div>
        </div>

        <main id="character-grid"></main>
    </div>

    <div id="character-modal" class="fixed inset-0 m3-dialog-backdrop hidden items-center justify-center p-2" onclick="closeCharacterModal()">
        <div class="m3-dialog-container" id="character-modal-content" onclick="event.stopPropagation()">
            <button class="icon-button absolute top-4 right-4 z-10" onclick="closeCharacterModal()" aria-label="Kapat"><span class="material-symbols-outlined">close</span></button>
            <header class="m3-dialog-header p-4 flex-shrink-0">
                <h2 id="modal-character-name" class="m3-dialog-title text-3xl font-bold">Karakter Adı</h2>
            </header>
            <div class="m3-dialog-content px-4 py-6 flex-grow flex flex-col items-center justify-between">
                <div id="modal-evolutions" class="grid gap-4 justify-center w-full"></div>
                <div id="modal-fusions" class="hidden w-full mt-8">
                    <h3 class="text-xl font-bold mb-4 text-center" style="color: var(--md-sys-color-fusion);">Katıldığı Füzyonlar</h3>
                    <div id="fusion-list" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 justify-center"></div>
                </div>
            </div>
            <footer class="m3-dialog-footer p-2 flex-shrink-0 border-t" style="border-color: var(--md-sys-color-outline-variant);">
                <button id="prev-char-btn" class="modal-nav-button ripple-effect"><span class="material-symbols-outlined">arrow_back</span><span id="prev-char-name" class="modal-nav-text font-semibold">Önceki</span></button>
                <button id="next-char-btn" class="modal-nav-button ripple-effect"><span id="next-char-name" class="modal-nav-text font-semibold">Sonraki</span><span class="material-symbols-outlined">arrow_forward</span></button>
            </footer>
        </div>
    </div>

    <div id="fusion-modal" class="fixed inset-0 m3-dialog-backdrop hidden items-center justify-center p-2" onclick="closeFusionModal()">
        <div class="m3-dialog-container fusion-modal-background" id="fusion-modal-content" onclick="event.stopPropagation()">
            <button class="icon-button absolute top-4 right-4 z-10" onclick="closeFusionModal()" aria-label="Kapat"><span class="material-symbols-outlined">close</span></button>
            <header class="m3-dialog-header p-4 flex-shrink-0">
                <h2 id="modal-fusion-name" class="m3-dialog-title text-3xl font-bold" style="color: var(--md-sys-color-fusion);">Füzyon Adı</h2>
            </header>
            <div class="m3-dialog-content px-4 py-6 flex-grow">
                <div class="flex flex-col md:flex-row items-center justify-center gap-6">
                     <div id="fusion-partner-left" class="flex flex-col items-center text-center cursor-pointer group" data-character-id="" onclick="closeFusionModal(); openCharacterModal(this.dataset.characterId);"><img id="modal-fusion-left-char-image" src="" alt="Sol Karakter" class="w-full h-auto object-contain rounded-xl fusion-partner-card transition-transform duration-300 group-hover:scale-105"><p id="modal-fusion-left-char-name" class="mt-2 text-lg font-semibold"></p><p id="modal-fusion-left-char-star" class="text-lg font-medium"></p></div>
                    <div id="fusion-main-image" class="flex flex-col items-center text-center lg:col-span-1"><img id="modal-fusion-image" src="" alt="Füzyon Resmi" class="w-full h-auto object-contain rounded-2xl cursor-zoom-in shadow-2xl"><p id="modal-fusion-star" class="text-2xl font-semibold mt-2"></p></div>
                    <div id="fusion-partner-right" class="flex flex-col items-center text-center cursor-pointer group" data-character-id="" onclick="closeFusionModal(); openCharacterModal(this.dataset.characterId);"><img id="modal-fusion-right-char-image" src="" alt="Sağ Karakter" class="w-full h-auto object-contain rounded-xl fusion-partner-card transition-transform duration-300 group-hover:scale-105"><p id="modal-fusion-right-char-name" class="mt-2 text-lg font-semibold"></p><p id="modal-fusion-right-char-star" class="text-lg font-medium"></p></div>
                </div>
            </div>
            <footer class="m3-dialog-footer p-2 flex-shrink-0 border-t" style="border-color: var(--md-sys-color-outline-variant);">
                 <button id="prev-fusion-btn" class="modal-nav-button ripple-effect"><span class="material-symbols-outlined">arrow_back</span><span id="prev-fusion-name" class="modal-nav-text font-semibold">Önceki</span></button>
                <button id="next-fusion-btn" class="modal-nav-button ripple-effect"><span id="next-fusion-name" class="modal-nav-text font-semibold">Sonraki</span><span class="material-symbols-outlined">arrow_forward</span></button>
            </footer>
        </div>
    </div>

    <div id="easter-egg-modal" class="fixed inset-0 m3-dialog-backdrop hidden items-center justify-center p-2" onclick="closeEasterEggModal()">
        <div class="m3-dialog-container" id="easter-egg-modal-content" onclick="event.stopPropagation()">
            <button class="icon-button absolute top-4 right-4 z-10" onclick="closeEasterEggModal()" aria-label="Kapat"><span class="material-symbols-outlined">close</span></button>
            <header class="m3-dialog-header p-4 flex-shrink-0">
                <h2 id="ee-modal-name" class="m3-dialog-title text-3xl font-bold" style="color: var(--md-sys-color-primary);">Gizli Karakter Adı</h2>
            </header>
            <div class="m3-dialog-content px-4 py-6 flex-grow">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center justify-items-center h-full">
                    <div class="flex flex-col items-center text-center h-full">
                        <h3 class="text-xl font-semibold mb-3" style="color: var(--md-sys-color-primary-container);">Sır Hali</h3>
                        <img id="ee-modal-new-image" src="" alt="Gizli Karakter Resmi" class="w-full h-auto object-contain rounded-2xl cursor-zoom-in shadow-2xl max-h-[55vh]" onclick="enlargeImage(this.src)">
                    </div>
                    <div class="flex flex-col items-center text-center h-full">
                         <h3 id="ee-modal-original-label" class="text-xl font-semibold mb-3" style="color: var(--md-sys-color-on-surface-variant);">Orijinal Hali</h3>
                        <img id="ee-modal-original-image" src="" alt="Orijinal Karakter Resmi" class="w-full h-auto object-contain rounded-2xl cursor-zoom-in shadow-lg max-h-[55vh]" onclick="enlargeImage(this.src)">
                    </div>
                </div>
            </div>
            <footer class="m3-dialog-footer p-2 flex-shrink-0 border-t" style="border-color: var(--md-sys-color-outline-variant);">
                 <button id="prev-ee-btn" class="modal-nav-button ripple-effect"><span class="material-symbols-outlined">arrow_back</span><span id="prev-ee-name" class="modal-nav-text font-semibold">Önceki</span></button>
                <button id="next-ee-btn" class="modal-nav-button ripple-effect"><span id="next-ee-name" class="modal-nav-text font-semibold">Sonraki</span><span class="material-symbols-outlined">arrow_forward</span></button>
            </footer>
        </div>
    </div>

    <div id="search-modal" class="fixed inset-0 m3-dialog-backdrop hidden items-center justify-center p-2" onclick="closeSearchModal()">
        <div class="m3-dialog-container" id="search-modal-content" onclick="event.stopPropagation()">
            <button class="icon-button absolute top-4 right-4 z-10" onclick="closeSearchModal()" aria-label="Kapat"><span class="material-symbols-outlined">close</span></button>
            <header class="m3-dialog-header p-4 flex-shrink-0">
                <h2 class="m3-dialog-title text-3xl font-bold">Karakter Araması</h2>
            </header>
            <div class="m3-dialog-content px-4 pb-4 flex flex-col">
                <div class="mb-4 flex-shrink-0">
                    <input type="text" id="search-input" placeholder="Karakter adı veya ID'si girin..." class="w-full px-4 py-3 rounded-full border-2 outline-none transition-colors" style="background-color: var(--md-sys-color-surface-container); border-color: var(--md-sys-color-outline-variant); color: var(--md-sys-color-on-surface);">
                </div>
                <div id="search-results-container" class="flex-grow overflow-y-auto pr-2">
                    <p id="search-placeholder" class="text-center text-lg mt-8" style="color: var(--md-sys-color-on-surface-variant);">Aramak için yukarıya bir isim veya ID yazın.</p>
                    <div id="search-results-grid"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="enlarged-image-overlay" class="enlarged-image-container hidden" onclick="closeEnlargedImage()"><button class="icon-button absolute top-4 right-4 text-white text-4xl z-10" onclick="closeEnlargedImage(event)" aria-label="Resmi Kapat"><span class="material-symbols-outlined" style="font-size: 36px;">close</span></button><img id="enlarged-image" src="" alt="Büyük Resim" class="enlarged-image"></div>

    <script>
        const FUSION_STAR_COLOR_CLASS = 'text-fuchsia-400';
        const THREE_STAR_COLOR_CLASS = 'text-amber-400';
        const TWO_STAR_COLOR_CLASS = 'text-slate-400';
        const ONE_STAR_COLOR_CLASS = 'text-orange-400';
        const EASTER_EGG_PASSWORD = '1234';
        // === GİZLİ KARTLAR İÇİN MERKEZİ YILDIZ AYARLARI ===
        const EASTER_EGG_STAR_COUNT = 1; // Gizli kartlarda kaç tane sembol/yıldız olacağı.
        const EASTER_EGG_STAR_IS_FUSION_STYLE = true; // 'true' ise parlak (füzyon stili), 'false' ise normal olur.
        const EASTER_EGG_STAR_ICON = 'female male'; // Gösterilecek sembolün adı. Örnek: 'star', 'diamond', 'favorite', 'local_fire_department'

        const characters = [
            //KARAKTERLER = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =
            { id: 'buyucu', name: 'Büyücü', star: 1, imageUrl: 'https://i.ibb.co/WW3DSjgT/b-y-c-1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/xK0j21XT/b-y-c-2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/rKjQfVWR/b-y-c-3.jpg' }] },
            { id: 'rahibe', name: 'Rahibe', star: 1, imageUrl: 'https://i.ibb.co/vvT9pLJV/rahibe1yeni.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/VYGvZHHq/rahibe2yeni.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/WW79pCvn/rahibe3yeni.jpg' }] },
            { id: 'dansoz', name: 'Dansöz', star: 1, imageUrl: 'https://i.ibb.co/vxC47N0c/dans-1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/qMKfjQ6H/dans-2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/8gwWTnW1/dans-3.jpg' }] },
            { id: 'falci', name: 'Falcı', star: 1, imageUrl: 'https://i.ibb.co/ynpvZp1L/falc-1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/ZRCkv6Sw/falc-2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/1YSLR43x/falc-3.jpg' }] },
            { id: 'korsan', name: 'Korsan', star: 1, imageUrl: 'https://i.ibb.co/CpVChGPv/korsan1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/SwLyG1tQ/korsan2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/Q3QCJ7fP/korsan3.jpg' }] },
            { id: 'savasci', name: 'Savaşçı', star: 1, imageUrl: 'https://i.ibb.co/F4pYctZB/savasci1yeni.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/dskBzGYd/savasci2yeni.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/5hrZyhdD/savasci3yeni.jpg' }] },
            { id: 'okcu', name: 'Okçu', star: 1, imageUrl: 'https://i.ibb.co/7t5Pgxr0/ok-u1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/Kcx424sg/ok-u2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/tTvN7j1H/ok-u3.jpg' }] },
            { id: 'ninja', name: 'Ninja', star: 1, imageUrl: 'https://i.ibb.co/TJ4z4RP/ninja1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/SDrwNJrh/ninja2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/YBDCkTL9/ninja3.jpg' }] },
            { id: 'izci', name: 'İzci', star: 1, imageUrl: 'https://i.ibb.co/4wvy0p7H/izci1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/B57pqBm4/izci2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/Xr6wnQjC/izci3.jpg' }] },
            { id: 'hayalet', name: 'Hayalet', star: 1, imageUrl: 'https://i.ibb.co/rfKR25Vm/hayalet1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/21VC2dPt/hayalet2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/YFR2Rw0K/hayalet3.jpg' }] },
            { id: 'atesbuyucusu', name: 'Ateş Büyücüsü', star: 1, imageUrl: 'https://i.ibb.co/1GBHw5gc/ate-1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/xtVWHqq4/ate-2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/8gV8fSrh/ate-3.jpg' }] },
            { id: 'buzbuyucusu', name: 'Buz Büyücüsü', star: 1, imageUrl: 'https://i.ibb.co/M4WT53b/buz1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/yzqR3jM/buz2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/zW97htBN/buz3.jpg' }] },
            { id: 'silahsor', name: 'Silahşör', star: 1, imageUrl: 'https://i.ibb.co/ZpDDqkPP/indir-2.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/5WcQs9Nq/indir-3.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/SXFr056v/indir-4.jpg' }] },
            { id: 'cazibe', name: 'Cazibe', star: 1, imageUrl: 'https://i.ibb.co/yBQBGL5Y/cazibe1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/k2hXkSKV/cazibe2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/xSxMwnz5/cazibe3.jpg' }] },
            { id: 'ormanruhu', name: 'Orman Ruhu', star: 1, imageUrl: 'https://i.ibb.co/RkZfXFWX/do-a.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/XZxytsM4/do-a2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/8DSbGRzR/do-a3.jpg' }] },
            { id: 'sahinci', name: 'Şahinci', star: 1, imageUrl: 'https://i.ibb.co/pBSb9vVZ/ahin1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/JjmhzkBM/ahin2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/Vptx2S9p/ahin3.jpg' }] },
            { id: 'illuzyonist', name: 'İllüzyonist', star: 1, imageUrl: 'https://i.ibb.co/C5Lr8DDV/ill-zyon1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/fVtZpN8s/ill-zyon2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/VYSz0PYK/ill-zyon3.jpg' }] },
            { id: 'dervis', name: 'Derviş', star: 1, imageUrl: 'https://i.ibb.co/dsZRZzpt/dervi-1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/zT3tm8sz/dervi-2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/qMv1jB15/dervi-3.jpg' }] },
            { id: 'prenses', name: 'Prenses', star: 1, imageUrl: 'https://i.ibb.co/cK8m4bMJ/peri1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/ZpgB5cjG/peri2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/jZbTFb9v/peri3.jpg' }] },
            { id: 'simyaci', name: 'Simyacı', star: 1, imageUrl: 'https://i.ibb.co/0pg4Vrh0/simyac-1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/N65VzdkH/simyac-2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/9387YgZf/simyac-3.jpg' }] },{ id: 'kedikadin', name: 'Kedi Kadın', star: 1, imageUrl: 'https://i.ibb.co/zWTLhSR7/kedi1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/qYxVScfn/kedi2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/LdYJX6Hd/kedi3.jpg' }] },
            { id: 'kuskadin', name: 'Kuş Kadın', star: 1, imageUrl: 'https://i.ibb.co/RGWyqqQr/ku-1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/jkhsNMbx/ku-2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/0j0d4xNb/ku-3.jpg' }] },
            { id: 'vampir', name: 'Vampir', star: 1, imageUrl: 'https://i.ibb.co/6JHHhJw6/vampir1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/tP8fxr6C/vampir2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/RMh7SNB/vampir3.jpg' }] },{ id: 'paraliasker', name: 'Paralı Asker', star: 1, imageUrl: 'https://i.ibb.co/0g5P99T/asker1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/23RBCVzG/asker2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/8QkMRtg/asker3.jpg' }] },
            { id: 'mekanik', name: 'Mekanik', star: 1, imageUrl: 'https://i.ibb.co/d0wmWp3M/mekanik1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/nsM8qXrZ/mekanik2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/jkCct99V/mekanik3.jpg' }] },
            { id: 'saman', name: 'Şaman', star: 1, imageUrl: 'https://i.ibb.co/jZQjdxGr/aman1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/6cw94xmS/aman2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/Z6qgBHf6/aman3.jpg' }] },
            { id: 'cariye', name: 'Cariye', star: 1, imageUrl: 'https://i.ibb.co/jPv4b80h/indir-3.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/KcvSFBTT/indir-2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/5xrxPvxB/indir-4.jpg' }] },
            { id: 'hirsiz', name: 'Hırsız', star: 1, imageUrl: 'https://i.ibb.co/zhrYb4dp/indir-13.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/YYJ1jqj/indir-15.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/5mvbTxC/indir-20.jpg' }] },
            { id: 'goblin', name: 'Goblin', star: 1, imageUrl: 'https://i.ibb.co/xtkzsqPM/goblin1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/YxHLGHt/goblin2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/LhHYGgWw/goblin3.jpg' }] },
            { id: 'gokkusagiperisi', name: 'Gökkuşağı Perisi', star: 1, imageUrl: 'https://i.ibb.co/tTgmjpZp/peri1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/Mkyk5X8r/peri2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/ksHpyWSz/peri3.jpg' }] },
            { id: 'dusmusmelek', name: 'Düşmüş Melek', star: 1, imageUrl: 'https://i.ibb.co/0pWnGZY4/dusmus1.jpg', 
                evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/Jj3z5PDk/dusmus2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/TBjMxjHX/dusmus3.jpg' }] },
            { id: 'mehtapperisi', name: 'Mehtap Perisi', star: 1, imageUrl: 'https://i.ibb.co/fd0WmqG1/ayperi1.jpg', evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/2XhXmTk/ayperi2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/rKMH34GL/ayperiyeni.jpg' }] },
            { id: 'gunessovalyesi', name: 'Güneş Şövalyesi', star: 1, imageUrl: 'https://i.ibb.co/nq4hbJdj/paladin1.jpg', evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/Zpp0P1qg/paladin2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/F4w4tqP9/paladin3.jpg' }] },
            { id: 'demirci', name: 'Demirci', star: 1, imageUrl: 'https://i.ibb.co/vMvSpxy/demir1.jpg', evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/B5xxXNBb/demir2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/Vp9CGM2t/demir3.jpg' }] },
            { id: 'mumya', name: 'Mumya', star: 1, imageUrl: 'https://i.ibb.co/VWMhVCwH/mumya1.jpg', evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/ZRbdDvXd/mumya21.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/chGvch2Y/mumya3.jpg' }] },
            { id: 'ejderdogan', name: 'Ejderdoğan', star: 1, imageUrl: 'https://i.ibb.co/LXn9yM5k/ejder.jpg', evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/65XXz6r/ejder2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/mVsp6HJR/ejder3.jpg' }] },
            { id: 'soytari', name: 'Soytarı', star: 1, imageUrl: 'https://i.ibb.co/TBhL4d1G/soy1.jpg', evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/Fb87wvt9/soy2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/MxCV6tZp/soy3.jpg' }] },
            { id: 'bombaci', name: 'Patlama Uzmanı', star: 1, imageUrl: 'https://i.ibb.co/GgzPhZ8/bomb1.jpg', evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/6crLzgm5/bomb2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/PsJn9DGK/bomb3.jpg' }] },
            { id: 'seytancagirici', name: 'Şeytan Çağırıcı', star: 1, imageUrl: 'https://i.ibb.co/8Dgcw4d3/a-r1.jpg', evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/Kxk8QqYQ/cagirici2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/NnY60hLB/a-r3.jpg' }] },
            { id: 'kavgaci', name: 'KAVGACI', star: 1, imageUrl: 'https://i.ibb.co/sdFY25ST/kavga1.jpg', evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/LX09VZN4/kavga2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/PZZgzMzz/kavga3.jpg' }] },
            { id: 'tarikatci', name: 'Tarikatçı', star: 1, imageUrl: 'https://i.ibb.co/Vczy8Qr3/tarik1.jpg', evolutions: [{ star: 2, imageUrl: 'https://i.ibb.co/ccQ4bDMj/tarik2.jpg' }, { star: 3, imageUrl: 'https://i.ibb.co/G4xD9w7V/tarik3.jpg' }] },
            //YENİ KARAKTERLER BURAYA = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
            //YENİ KARAKTER ŞABLONU: { id: 'İD', name: 'İSİM', star: 1, imageUrl: 'RESİM1', evolutions: [{ star: 2, imageUrl: 'RESİM2' }, { star: 3, imageUrl: 'RESİM3' }] },
            //FÜZYONLAR  = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =
            { id: 'cadı', name: 'Cadı', star: 4, imageUrl: 'https://i.ibb.co/gbJDXPX9/cadiyeni.jpg', isFusion: true, fusionPartners: ['buyucu', 'rahibe'] },
            { id: 'kozmik-dansci', name: 'Kozmik Dansçı', star: 4, imageUrl: 'https://i.ibb.co/whpyGMMQ/kozmik-yolcu.jpg', isFusion: true, fusionPartners: ['dansoz', 'falci'] },
            { id: 'siren', name: 'Batık Hazine', star: 4, imageUrl: 'https://i.ibb.co/Pvg53HMY/merge-video-1753634899103.gif', isFusion: true, fusionPartners: ['dansoz', 'korsan'] },
            { id: 'valkur', name: 'Valkür', star: 4, imageUrl: 'https://i.ibb.co/6Jm7LGdW/valk-ryenigif.gif', isFusion: true, fusionPartners: ['rahibe', 'savasci'] },
            { id: 'kahin', name: 'Kader Örücü', star: 4, imageUrl: 'https://i.ibb.co/DfJFYb15/1753596921039.gif', isFusion: true, fusionPartners: ['falci', 'ninja'] },
            { id: 'avci', name: 'Avcı', star: 4, imageUrl: 'https://i.ibb.co/YTT1Y36M/mistik-avc.jpg', isFusion: true, fusionPartners: ['buyucu', 'okcu'] },
            { id: 'nisanci', name: 'Filo Avcısı', star: 4, imageUrl: 'https://i.ibb.co/JP6NJHk/1753843652372.gif', isFusion: true, fusionPartners: ['korsan', 'okcu'] },
            { id: 'suvari', name: 'Süvari', star: 4, imageUrl: 'https://i.ibb.co/fY8N7sqL/s-vari.jpg', isFusion: true, fusionPartners: ['izci', 'savasci'] },
            { id: 'kadim-buyucu', name: 'Kadim Büyücü', star: 4, imageUrl: 'https://i.ibb.co/vgNxdtD/kadim.jpg', isFusion: true, fusionPartners: ['atesbuyucusu', 'buzbuyucusu'] },
            { id: 'cehennem-dalgasi', name: 'Cehennem Dalgası', star: 4, imageUrl: 'https://i.ibb.co/r2F8Wcw6/Ate-Efektli-Karakter-Videosu.gif', isFusion: true, fusionPartners: ['atesbuyucusu', 'korsan'] },
            { id: 'ruh-cagiran', name: 'Ruh Çağıran', star: 4, imageUrl: 'https://i.ibb.co/hxHC8XBm/ruh.jpg', isFusion: true, fusionPartners: ['falci', 'hayalet'] },
            { id: 'ruh-avcisi', name: 'Ruh Avcısı', star: 4, imageUrl: 'https://i.ibb.co/MDbNYwmV/indir-6.jpg', isFusion: true, fusionPartners: ['hayalet', 'silahsor'] },
            { id: 'keskin-nisanci', name: 'Keskin Nişancı', star: 4, imageUrl: 'https://i.ibb.co/fzGxn263/indir-9.jpg', isFusion: true, fusionPartners: ['okcu', 'silahsor'] },
            { id: 'olumsuz-muhafiz', name: 'Ölümsüz Muhafız', star: 4, imageUrl: 'https://i.ibb.co/F4Z1pMBv/l-ms-z.jpg', isFusion: true, fusionPartners: ['hayalet', 'savasci'] },
            { id: 'donmus-kalp', name: 'Donmuş Kalp', star: 4, imageUrl: 'https://i.ibb.co/p6x1XVF6/donuk-kalp.jpg', isFusion: true, fusionPartners: ['buzbuyucusu', 'cazibe'] },
            { id: 'yasak-meyve', name: 'Yasak Meyve', star: 4, imageUrl: 'https://i.ibb.co/C5YtZyzm/yasak-elma.jpg', isFusion: true, fusionPartners: ['cazibe', 'ormanruhu'] },
            { id: 'serap-kilici', name: 'Serap Kılıcı', star: 4, imageUrl: 'https://i.ibb.co/BK3rG036/serap.jpg', isFusion: true, fusionPartners: ['dervis', 'illuzyonist'] },
            { id: 'hayalet-kanat', name: 'Hayalet Kanat', star: 4, imageUrl: 'https://i.ibb.co/fdnf9Hg9/g-lge.jpg', isFusion: true, fusionPartners: ['illuzyonist', 'sahinci'] },
            { id: 'asi-kralice', name: 'Asi Kraliçe', star: 4, imageUrl: 'https://i.ibb.co/NgWyfWv2/krali-e.jpg', isFusion: true, fusionPartners: ['prenses', 'savasci'] },
            { id: 'sehvet-perisi', name: 'Şehvet Perisi', star: 4, imageUrl: 'https://i.ibb.co/yB005D9y/sehvet.jpg', isFusion: true, fusionPartners: ['cazibe', 'prenses'] },
            { id: 'ask-iksiri', name: 'Aşk İksiri', star: 4, imageUrl: 'https://i.ibb.co/Gf5Sfy3S/askyeni.jpg', isFusion: true, fusionPartners: ['cazibe', 'simyaci'] },
            { id: 'zehir-tuccari', name: 'Zehir Tüccarı', star: 4, imageUrl: 'https://i.ibb.co/ZRSbLd0r/zehir.jpg', isFusion: true, fusionPartners: ['ninja', 'simyaci'] },
            { id: 'golge-buyucu', name: 'Gölge Büyücü', star: 4, imageUrl: 'https://i.ibb.co/9k7NkHvb/Efektli-Oyun-Karakteri-Videosu-Haz-r.gif', isFusion: true, fusionPartners: ['buyucu', 'ninja'] },
            { id: 'golge-panteri', name: 'Gölge Panteri', star: 4, imageUrl: 'https://i.ibb.co/nq7PjzvP/golgepanteri.jpg', isFusion: true, fusionPartners: ['kedikadin', 'ninja'] },
            { id: 'olum-valsi', name: 'Ölüm Valsi', star: 4, imageUrl: 'https://i.ibb.co/W4rh6MnB/l-mvalsi.jpg', isFusion: true, fusionPartners: ['dansoz', 'dervis'] },
            { id: 'anka-kusu', name: 'Anka Kusu', star: 4, imageUrl: 'https://i.ibb.co/Jj8MfcND/ate-gif.gif', isFusion: true, fusionPartners: ['atesbuyucusu', 'kuskadin'] },
            { id: 'yuce-melek', name: 'Yüce Melek', star: 4, imageUrl: 'https://i.ibb.co/sd5XfzyR/1753596990473.gif', isFusion: true, fusionPartners: ['kuskadin', 'rahibe'] },
            { id: 'kan-cicegi', name: 'Kan Çiçeği', star: 4, imageUrl: 'https://i.ibb.co/1f4kd5L1/kan.jpg', isFusion: true, fusionPartners: ['ormanruhu', 'vampir'] },
            { id: 'golem-efendisi', name: 'Golem Efendisi', star: 4, imageUrl: 'https://i.ibb.co/m561FTzp/1753596929882.gif', isFusion: true, fusionPartners: ['illuzyonist', 'mekanik'] },
            { id: 'yildirim-elcisi', name: 'Yıldırım Elçisi', star: 4, imageUrl: 'https://i.ibb.co/jkVbq1Gj/indir-29.jpg', isFusion: true, fusionPartners: ['izci', 'saman'] },
            { id: 'oluler-dusesi', name: 'Ölüler Düşesi', star: 4, imageUrl: 'https://i.ibb.co/Q3jDvRJd/merge-video-1753638876285.gif', isFusion: true, fusionPartners: ['saman', 'vampir'] },
            { id: 'meka-gladyator', name: 'Meka Gladyatör', star: 4, imageUrl: 'https://i.ibb.co/wFpq0cLT/Efektli-Karakter-Videosu-Olu-turma.gif', isFusion: true, fusionPartners: ['mekanik', 'paraliasker'] },
            { id: 'dovus-kesisi', name: 'Dövüş Keşişi', star: 4, imageUrl: 'https://i.ibb.co/3yz8myZt/indir-33.jpg', isFusion: true, fusionPartners: ['dervis', 'saman'] },
            { id: 'kitsune', name: 'Kitsune', star: 4, imageUrl: 'https://i.ibb.co/fd4VXtN0/indir-8.jpg', isFusion: true, fusionPartners: ['cariye', 'kedikadin'] },
            { id: 'geysa', name: 'Geyşa', star: 4, imageUrl: 'https://i.ibb.co/BKCNBRSg/1753843742945.gif', isFusion: true, fusionPartners: ['cariye', 'dansoz'] },
            { id: 'ucan-hollandali', name: 'Uçan Hollandalı', star: 4, imageUrl: 'https://i.ibb.co/hx2cqJ9j/Karaktere-Efekt-Ekleme-Talebi-Cevab.gif', isFusion: true, fusionPartners: ['hayalet', 'korsan'] },
            { id: 'hazine-avcisi', name: 'Hazine Avcısı', star: 4, imageUrl: 'https://i.ibb.co/gMVTvL00/indir-21.jpg', isFusion: true, fusionPartners: ['hirsiz', 'izci'] },
            { id: 'cadi-doktor', name: 'Cadı Doktor', star: 4, imageUrl: 'https://i.ibb.co/tp2LYfZg/B-y-Efektli-Karakter-Videosu-Olu-turma.gif', isFusion: true, fusionPartners: ['goblin', 'saman'] },
            { id: 'kucuk-berserker', name: 'Küçük Berserker', star: 4, imageUrl: 'https://i.ibb.co/HTRsw2xs/indir-4.jpg', isFusion: true, fusionPartners: ['goblin', 'paraliasker'] },
            { id: 'kaos-perisi', name: 'Kaos Perisi', star: 4, imageUrl: 'https://i.ibb.co/fGr9vW5g/1753844042911.gif', isFusion: true, fusionPartners: ['gokkusagiperisi', 'prenses'] },
            { id: 'gunahkar-serenad', name: 'Günahkar Serenad', star: 4, imageUrl: 'https://i.ibb.co/WWs98BS1/vals.jpg', isFusion: true, fusionPartners: ['cazibe', 'dusmusmelek'] },
            { id: 'aurora-perisi', name: 'Kuzey Işığı Perisi', star: 4, imageUrl: 'https://i.ibb.co/qLd5599m/aurorayeni.jpg', isFusion: true, fusionPartners: ['buzbuyucusu', 'mehtapperisi'] },
            { id: 'gunesin-hukmu', name: 'Güneşin Hükmü', star: 4, imageUrl: 'https://i.ibb.co/1fjHJ2d9/gunesok.gif', isFusion: true, fusionPartners: ['okcu', 'gunessovalyesi'] },
            { id: 'ruya-isleyici', name: 'Rüya İşleyici', star: 4, imageUrl: 'https://i.ibb.co/4Zj68Wkd/ruya.gif', isFusion: true, fusionPartners: ['demirci', 'illuzyonist'] },
            { id: 'olumsuz-firavun', name: 'Ölümsüz Firavun', star: 4, imageUrl: 'https://i.ibb.co/bMGRkjKR/mumder.jpg', isFusion: true, fusionPartners: ['dervis', 'mumya'] },
            { id: 'kara-alev', name: 'Kara Alev', star: 4, imageUrl: 'https://i.ibb.co/VYM44DHG/kara.gif', isFusion: true, fusionPartners: ['dusmusmelek', 'ejderdogan'] },
            { id: 'renk-cumbusu', name: 'Renk Cümbüşü', star: 4, imageUrl: 'https://i.ibb.co/SZLqtnw/bombrenk.jpg', isFusion: true, fusionPartners: ['bombaci', 'soytari'] },
            { id: 'bozulmus-yemin', name: 'Bozulmuş Yemin', star: 4, imageUrl: 'https://i.ibb.co/yB72D5Tc/sheytan.jpg', isFusion: true, fusionPartners: ['dusmusmelek', 'seytancagirici'] },
            { id: 'demir-yumruk', name: 'DEMİR YUMRUK', star: 4, imageUrl: 'https://i.ibb.co/5XtVzLVb/kavdem.jpg', isFusion: true, fusionPartners: ['demirci', 'kavgaci'] },
            { id: 'kiyamet-alameti', name: 'Kıyamet Alameti', star: 4, imageUrl: 'https://i.ibb.co/20Nwtq4d/tarikyemin.jpg', isFusion: true, fusionPartners: ['seytancagirici', 'tarikatci'] },
            //YENİ FÜZYONLAR BURAYA  = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
            //YENİ FÜZYON ŞABLONU: { id: 'İD', name: 'İSİM', star: 4, imageUrl: 'RESİM4', isFusion: true, fusionPartners: ['KRKTR1', 'KRKTR2'] },
            //KARAKTERLERİN SONU  = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =
        ];

        // AYRI EASTER EGG DİZİSİ
        const easterEggs = [
            { id: 'ee_hazine', name: 'İlginç Totem', imageUrl: 'https://i.ibb.co/hJXBvQmq/avc.jpg', originalCharacterId: 'hazine-avcisi' },
            { id: 'ee_buz', name: 'Soğuk Yatak', imageUrl: 'https://i.ibb.co/hJRDVrHB/buzz.jpg', originalCharacterId: 'buzbuyucusu' },
            { id: 'ee_cariye', name: 'Özel Poz', imageUrl: 'https://i.ibb.co/mrspQNLN/cariye.jpg', originalCharacterId: 'cariye' },
            { id: 'ee_dovus', name: 'Şampiyonun Ödülü', imageUrl: 'https://i.ibb.co/jP6hsznC/d-v.jpg', originalCharacterId: 'kavgaci' },
            { id: 'ee_meyve', name: 'Gizli Bahçe', imageUrl: 'https://i.ibb.co/fdcfghMP/meyve.jpg', originalCharacterId: 'yasak-meyve' },
            { id: 'ee_savas', name: 'Savaş Sonrası Temizlenme', imageUrl: 'https://i.ibb.co/jk8j1ffw/savas.jpg', originalCharacterId: 'savasci' },
            { id: 'ee_ninja', name: 'Soyunma', imageUrl: 'https://i.ibb.co/Wp2T0hbm/ninja.jpg', originalCharacterId: 'ninja' },
            { id: 'ee_siren', name: 'Serbest Dalış', imageUrl: 'https://i.ibb.co/JjkvXD2T/siren.jpg', originalCharacterId: 'siren' },
            { id: 'ee_tentacle', name: 'Öfkeli Tanrı', imageUrl: 'https://i.ibb.co/h1BgZTKj/tenta.jpg', originalCharacterId: 'tarikatci' },
            { id: 'ee_hararet', name: 'Hararetli Dövüşçü', imageUrl: 'https://i.ibb.co/jPq156wc/indir.jpg', originalCharacterId: 'demir-yumruk' },
            { id: 'ee_gunes', name: 'Kutsal Yara', imageUrl: 'https://i.ibb.co/FbPN1Ghw/g-ne.jpg', originalCharacterId: 'gunessovalyesi' },
            { id: 'ee_iksir', name: 'Şehvet İksiri', imageUrl: 'https://i.ibb.co/nMPXVJJ1/iksir.jpg', originalCharacterId: 'ask-iksiri' },
            { id: 'ee_kedi', name: 'Av Sonrası Kestirme', imageUrl: 'https://i.ibb.co/27QPDsbK/kedi.jpg', originalCharacterId: 'kedikadin' },
            { id: 'ee_robot', name: 'Bilimsel Haz', imageUrl: 'https://i.ibb.co/ZRyvqPxJ/mekanik.jpg', originalCharacterId: 'mekanik' },
        ];

        const dom = {};
        const state = { 
            galleryMode: 'all', 
            imageSizeIndex: 3, 
            isFitToScreenMode: true, 
            currentModalCharId: null, 
            currentModalType: null, 
            uniqueNavigableList: [],
            isEasterEggMode: false
        };
        const sizeProfiles = [ { name: '1', minCardWidth: '170px' }, { name: '2', minCardWidth: '220px' }, { name: '3', minCardWidth: '270px' }, { name: '4', minCardWidth: '320px' }, { name: '5', minCardWidth: '370px' }, { name: '6', minCardWidth: '420px' } ];

        const getStarEmojis = (isFusion, starCount, iconName = 'star') => {
            if (!starCount || starCount < 1) starCount = 1; // Hata olmaması için en az 1 yıldız göster
            const colorKey = Math.min(starCount, 4); // 4'ten büyük yıldız sayısı için 4 yıldız rengini kullan
            const colors = { 1: ONE_STAR_COLOR_CLASS, 2: TWO_STAR_COLOR_CLASS, 3: THREE_STAR_COLOR_CLASS, 4: FUSION_STAR_COLOR_CLASS };
            const starIcon = `<span class="material-symbols-outlined ${colors[colorKey]}" style="font-variation-settings: 'FILL' 1;">${iconName}</span>`;
            const starHtml = Array(starCount).fill(starIcon).join('');
            return isFusion ? `<div class="flex fusion-stars">${starHtml}</div>` : `<div class="flex">${starHtml}</div>`;
        };
        
        const get3StarImageUrl = (baseCharId) => {
            const baseChar = characters.find(c => c.id === baseCharId && !c.isFusion);
            const threeStarEvo = baseChar?.evolutions.find(e => e.star === 3);
            return threeStarEvo ? threeStarEvo.imageUrl : (baseChar ? baseChar.imageUrl : '');
        };

        const getCharacterImageUrlByStar = (baseCharId, star) => {
            const baseChar = characters.find(c => c.id === baseCharId && !c.isFusion);
            if (!baseChar) return '';
            if (star === 1) return baseChar.imageUrl;
            const evolution = baseChar.evolutions.find(e => e.star === star);
            return evolution ? evolution.imageUrl : '';
        };

        function renderCharacters() {
            dom.characterGrid.classList.add('grid-fade-out');
            setTimeout(() => {
                dom.characterGrid.innerHTML = '';
                dom.characterGrid.classList.remove('grid-fade-out');
                const cardWidthPx = parseInt(sizeProfiles[state.imageSizeIndex].minCardWidth, 10);
                if (state.isFitToScreenMode) {
                    const gridContainerWidth = dom.characterGrid.offsetWidth;
                    const gapPx = 24;
                    const baseColumnCount = Math.floor((gridContainerWidth + gapPx) / (cardWidthPx + gapPx)) || 1;
                    const moreColumnCount = Math.max(2, Math.ceil(baseColumnCount * 1.5));
                    dom.characterGrid.style.gridTemplateColumns = `repeat(${moreColumnCount}, minmax(0, 1fr))`;
                } else {
                    dom.characterGrid.style.gridTemplateColumns = `repeat(auto-fit, minmax(${sizeProfiles[state.imageSizeIndex].minCardWidth}, 1fr))`;
                }
                
                let allDisplayableCharacters = [];
                let isEasterEggView = false;

                if (state.galleryMode === 'easter-egg') {
                    allDisplayableCharacters = easterEggs.sort((a, b) => a.name.localeCompare(b.name, 'tr'));
                    isEasterEggView = true;
                } else if (state.galleryMode === 'fusion') {
                    allDisplayableCharacters = characters.filter(char => char.isFusion).map(char => ({...char, displayStar: 4, displayImageUrl: char.imageUrl}));
                    allDisplayableCharacters.sort((a, b) => a.name.localeCompare(b.name, 'tr'));
                } else if (state.galleryMode === 'all') {
                    // DÜZELTME 1: Sıralama mantığı burada güncellendi
                    const nonFusions = characters.filter(c => !c.isFusion).sort((a,b) => a.name.localeCompare(b.name, 'tr'));
                    nonFusions.forEach(char => {
                        allDisplayableCharacters.push({ ...char, displayStar: 1, displayImageUrl: char.imageUrl });
                        char.evolutions?.forEach(evo => {
                            allDisplayableCharacters.push({ ...char, displayStar: evo.star, displayImageUrl: evo.imageUrl });
                        });
                    });
                    const sortedFusions = characters.filter(char => char.isFusion)
                        .sort((a, b) => a.name.localeCompare(b.name, 'tr'))
                        .map(char => ({...char, displayStar: 4, displayImageUrl: char.imageUrl}));
                    allDisplayableCharacters.push(...sortedFusions);
                } else {
                    const starFilter = parseInt(state.galleryMode.split('-')[0]);
                    allDisplayableCharacters = characters.filter(char => !char.isFusion).flatMap(char => {
                        if (starFilter === 1) return [{ ...char, displayStar: 1, displayImageUrl: char.imageUrl }];
                        const evo = char.evolutions?.find(e => e.star === starFilter);
                        return evo ? [{ ...char, displayStar: starFilter, displayImageUrl: evo.imageUrl }] : [];
                    });
                    allDisplayableCharacters.sort((a, b) => a.name.localeCompare(b.name, 'tr'));
                }
                
                state.uniqueNavigableList = characters.filter(c => c.star === 1 || c.isFusion).sort((a, b) => (a.isFusion !== b.isFusion) ? (a.isFusion ? 1 : -1) : a.name.localeCompare(b.name, 'tr'));
                
                if (allDisplayableCharacters.length === 0) {
                    dom.characterGrid.innerHTML = `<p class="col-span-full text-center text-lg" style="color: var(--md-sys-color-on-surface-variant);">Bu filtrede gösterilecek karakter bulunamadı.</p>`;
                    return;
                }
                
                allDisplayableCharacters.forEach((char, index) => {
                    const card = document.createElement('div');
                    const isFusion = char.isFusion;
                    card.className = `character-card ripple-effect flex flex-col cursor-pointer ${isFusion || isEasterEggView ? 'fusion-card' : ''}`;
                    card.dataset.id = char.id;
                    card.style.animationDelay = `${index * 40}ms`;
                    
                    if(isEasterEggView) {
                        card.onclick = () => openEasterEggModal(char.id);
                    } else {
                        card.onclick = () => isFusion ? openFusionModal(char.id) : openCharacterModal(char.id);
                    }

                    const nameClass = isFusion || isEasterEggView ? 'font-fantastical-fusion' : '';
                    const stars = isEasterEggView ? getStarEmojis(EASTER_EGG_STAR_IS_FUSION_STYLE, EASTER_EGG_STAR_COUNT, EASTER_EGG_STAR_ICON) : getStarEmojis(isFusion, char.displayStar || char.star);
                    const imageUrl = isEasterEggView ? char.imageUrl : (char.displayImageUrl || char.imageUrl);

                    card.innerHTML = `<div class="character-card-image-wrapper"><img src="${imageUrl}" alt="${char.name}" class="character-card-image" loading="lazy"></div><div class="p-4 flex-grow flex flex-col justify-end"><h3 class="character-name text-lg font-bold truncate ${nameClass}">${char.name}</h3><div class="flex mt-1">${stars}</div></div>`;
                    dom.characterGrid.appendChild(card);
                });
                addInteractiveEffects();
            }, 200);
        }

        function updateFilterSelection() {
            dom.filter.toggleBtn.classList.remove('selected');
            dom.easterEgg.filterBtn.classList.remove('selected');

            if (state.galleryMode === 'easter-egg') {
                dom.easterEgg.filterBtn.classList.add('selected');
            } else {
                dom.filter.toggleBtn.classList.add('selected');
            }
        }

        function updateUI() {
            dom.zoom.label.textContent = `${sizeProfiles[state.imageSizeIndex].name.trim()}`;
            dom.zoom.outBtn.disabled = state.imageSizeIndex === 0;
            dom.zoom.inBtn.disabled = state.imageSizeIndex === sizeProfiles.length - 1;
            dom.layout.toggleBtn.classList.toggle('active', state.isFitToScreenMode);
            dom.easterEgg.indicator.classList.toggle('hidden', !state.isEasterEggMode);
            dom.easterEgg.filterBtn.classList.toggle('hidden', !state.isEasterEggMode);
            updateFilterSelection();
        }

        function openModal(modalElement, contentElement) {
            document.body.classList.add('modal-open');
            modalElement.classList.remove('hidden');
            modalElement.classList.add('flex');
            setTimeout(() => contentElement.classList.add('visible'), 20);
        }

        function closeModal(modalElement, contentElement) {
            document.body.classList.remove('modal-open');
            contentElement.classList.remove('visible');
            setTimeout(() => {
                modalElement.classList.add('hidden');
                modalElement.classList.remove('flex');
            }, 300);
            state.currentModalCharId = null;
            state.currentModalType = null;
        }

        function updateModalNavigation(id, type, list, modalElements) {
            state.currentModalCharId = id;
            state.currentModalType = type;
            const currentIndex = list.findIndex(item => item.id === id);
            const prevItem = currentIndex > 0 ? list[currentIndex - 1] : null;
            const nextItem = currentIndex < list.length - 1 ? list[currentIndex + 1] : null;
            
            const openNextOrPrev = (item) => {
                let closeFunc, openFunc;
                if (type === 'character') { closeFunc = closeCharacterModal; openFunc = openCharacterModal; } 
                else if (type === 'fusion') { closeFunc = closeFusionModal; openFunc = openFusionModal; }
                else if (type === 'easter-egg') { closeFunc = closeEasterEggModal; openFunc = openEasterEggModal; }
                
                closeFunc();
                setTimeout(() => openFunc(item.id), 310);
            };

            const setupNavControl = (control, nameSpan, item) => {
                const action = item ? (e) => { e.stopPropagation(); openNextOrPrev(item); } : null;
                control.disabled = !item;
                control.onclick = action;
                if (nameSpan) {
                    nameSpan.textContent = item ? item.name : (control.id.startsWith('prev') ? 'Başlangıç' : 'Son');
                    nameSpan.onclick = action;
                    nameSpan.style.cursor = item ? 'pointer' : 'default';
                }
            };

            setupNavControl(modalElements.prevBtn, modalElements.prevName, prevItem);
            setupNavControl(modalElements.nextBtn, modalElements.nextName, nextItem);
        }

        function openCharacterModal(characterId) {
            const char = characters.find(c => c.id === characterId && !c.isFusion);
            if (!char) return;
            const modal = dom.characterModal;
            const modalImageMinWidth = sizeProfiles[state.imageSizeIndex].minCardWidth;
            modal.evolutions.style.gridTemplateColumns = `repeat(auto-fit, ${modalImageMinWidth})`;
            modal.name.textContent = char.name;
            modal.evolutions.innerHTML = '';
            const allEvolutions = [{ star: 1, imageUrl: char.imageUrl }, ...(char.evolutions || [])];
            allEvolutions.forEach(evo => {
                const evoDiv = document.createElement('div');
                evoDiv.className = `flex flex-col items-center p-3 rounded-2xl cursor-pointer transition-colors hover:bg-[var(--md-sys-color-surface-container-highest)]`;
                evoDiv.style.backgroundColor = 'var(--md-sys-color-surface-container)';
                const imgWrapper = document.createElement('div');
                imgWrapper.style.width = modalImageMinWidth;
                imgWrapper.innerHTML = `<img src="${getCharacterImageUrlByStar(char.id, evo.star)}" alt="${char.name} ${evo.star} Yıldız" class="w-full h-auto object-contain rounded-xl mb-2 cursor-zoom-in" onclick="enlargeImage(this.src)">`;
                const p = document.createElement('p');
                p.className = 'text-lg font-medium flex';
                p.innerHTML = getStarEmojis(false, evo.star);
                evoDiv.appendChild(imgWrapper);
                evoDiv.appendChild(p);
                modal.evolutions.appendChild(evoDiv);
            });
            const fusions = characters.filter(f => f.isFusion && f.fusionPartners.includes(char.id));
            modal.fusionsContainer.classList.toggle('hidden', fusions.length === 0);
            if (fusions.length > 0) {
                modal.fusionList.innerHTML = '';
                fusions.forEach(fusion => {
                    const fusionCard = document.createElement('div');
                    fusionCard.className = `rounded-xl p-3 flex flex-col items-center cursor-pointer transition-transform hover:scale-105`;
                    fusionCard.style.backgroundColor = 'var(--md-sys-color-fusion-container)';
                    fusionCard.onclick = (e) => { e.stopPropagation(); closeCharacterModal(); setTimeout(() => openFusionModal(fusion.id), 310); };
                    const nameClass = 'font-fantastical-fusion';
                    fusionCard.innerHTML = `<img src="${fusion.imageUrl}" alt="${fusion.name}" class="w-24 h-auto object-cover rounded-lg mb-2"><p class="text-sm font-semibold text-center ${nameClass}" style="color: var(--md-sys-color-on-fusion-container);">${fusion.name}</p>`;
                    modal.fusionList.appendChild(fusionCard);
                });
            }
            openModal(modal.element, modal.content);
            updateModalNavigation(characterId, 'character', state.uniqueNavigableList, dom.characterModal);
        }
        function closeCharacterModal() { closeModal(dom.characterModal.element, dom.characterModal.content); }

        function openFusionModal(fusionId) {
            const fusion = characters.find(c => c.id === fusionId && c.isFusion);
            if (!fusion) return;
            const modal = dom.fusionModal;
            const mainImageWidth = sizeProfiles[state.imageSizeIndex].minCardWidth;
            const partnerImageWidth = `${parseInt(mainImageWidth, 10) * 0.75}px`;
            modal.name.textContent = fusion.name;
            modal.name.classList.add('font-fantastical-fusion');
            modal.image.src = fusion.imageUrl;
            modal.image.setAttribute('onclick', `enlargeImage('${fusion.imageUrl}')`);
            const [p1, p2] = fusion.fusionPartners.map(id => characters.find(c => c.id === id));
            if (p1) {
                modal.leftChar.image.src = get3StarImageUrl(p1.id);
                modal.leftChar.container.style.width = partnerImageWidth;
                modal.leftChar.name.textContent = p1.name;
                modal.leftChar.container.dataset.characterId = p1.id;
                modal.leftChar.starDisplay.innerHTML = `${getStarEmojis(false, 3)}`;
            }
            if (p2) {
                modal.rightChar.image.src = get3StarImageUrl(p2.id);
                modal.rightChar.container.style.width = partnerImageWidth;
                modal.rightChar.name.textContent = p2.name;
                modal.rightChar.container.dataset.characterId = p2.id;
                modal.rightChar.starDisplay.innerHTML = `${getStarEmojis(false, 3)}`;
            }
            modal.imageContainer.style.width = mainImageWidth;
            modal.star.innerHTML = `${getStarEmojis(true, 4)}`;
            openModal(modal.element, modal.content);
            updateModalNavigation(fusionId, 'fusion', state.uniqueNavigableList, dom.fusionModal);
        }
        function closeFusionModal() {
            dom.fusionModal.name.classList.remove('font-fantastical-fusion');
            closeModal(dom.fusionModal.element, dom.fusionModal.content);
        }

        // DÜZELTME 2: Füzyonları da destekleyen Easter Egg modalı fonksiyonu
        function openEasterEggModal(eeId) {
            const ee = easterEggs.find(e => e.id === eeId);
            if (!ee) return;
            const originalChar = characters.find(c => c.id === ee.originalCharacterId);
            if (!originalChar) return;

            const modal = dom.easterEggModal;
            modal.name.textContent = ee.name;
            modal.newImage.src = ee.imageUrl;
            
            let originalImageUrl = '';
            let originalLabel = '';

            if (originalChar.isFusion) {
                originalImageUrl = originalChar.imageUrl;
                originalLabel = 'Orijinal Hali (4★)';
            } else {
                originalImageUrl = get3StarImageUrl(originalChar.id);
                originalLabel = 'Orijinal Hali (3★)';
            }
            modal.originalImage.src = originalImageUrl;
            modal.originalLabel.textContent = originalLabel;

            openModal(modal.element, modal.content);
            updateModalNavigation(eeId, 'easter-egg', easterEggs, dom.easterEggModal);
        }
        function closeEasterEggModal() { closeModal(dom.easterEggModal.element, dom.easterEggModal.content); }


        function openSearchModal() { openModal(dom.search.modal, dom.search.content); dom.search.input.value = ''; renderSearchResults(); dom.search.input.focus(); }
        function closeSearchModal() { closeModal(dom.search.modal, dom.search.content); }

        function createSearchResultCard(item) {
            const card = document.createElement('div');
            card.className = 'search-result-card';
            const action = item.isFusion ? `closeSearchModal(); openFusionModal('${item.id}');` : `closeSearchModal(); openCharacterModal('${item.id}');`;
            card.setAttribute('onclick', action);
            const nameClass = item.isFusion ? 'font-fantastical-fusion' : '';
            card.innerHTML = `<img src="${item.displayImageUrl}" alt="${item.name}" class="w-24 h-24 object-cover rounded-md flex-shrink-0"><div class="flex flex-col gap-1"><h4 class="text-lg font-bold ${nameClass}">${item.name}</h4><div>${getStarEmojis(item.isFusion, item.displayStar)}</div><p class="text-xs font-mono" style="color: var(--md-sys-color-on-surface-variant);">ID: ${item.id}</p></div>`;
            return card;
        }

        function renderSearchResults() {
            const grid = dom.search.resultsGrid;
            const placeholder = dom.search.placeholder;
            grid.innerHTML = '';
            const searchTerm = dom.search.input.value.toLowerCase().trim();

            if (!searchTerm) {
                placeholder.textContent = 'Aramak için yukarıya bir isim veya ID yazın.';
                placeholder.classList.remove('hidden');
                return;
            }
            const foundItems = [];
            characters.forEach(char => {
                const nameMatch = char.name.toLowerCase().includes(searchTerm);
                const idMatch = char.id.toLowerCase().includes(searchTerm);
                if (nameMatch || idMatch) {
                    if (char.isFusion) {
                        foundItems.push({ ...char, displayStar: 4, displayImageUrl: char.imageUrl });
                    } else {
                        foundItems.push({ ...char, displayStar: 1, displayImageUrl: char.imageUrl });
                        char.evolutions?.forEach(evo => {
                            foundItems.push({ ...char, displayStar: evo.star, displayImageUrl: evo.imageUrl });
                        });
                    }
                }
            });
            if (foundItems.length === 0) {
                placeholder.textContent = `"${dom.search.input.value}" için sonuç bulunamadı.`;
                placeholder.classList.remove('hidden');
                return;
            }
            placeholder.classList.add('hidden');
            foundItems.forEach(item => {
                grid.appendChild(createSearchResultCard(item));
            });
        }

        function enlargeImage(src) {
            const openModal = document.querySelector('.m3-dialog-container.visible');
            if (openModal) { openModal.classList.add('modal-transform-paused'); }
            dom.enlargedImage.image.src = src;
            dom.enlargedImage.overlay.classList.remove('hidden');
        }

        function closeEnlargedImage(event) {
            if (event) event.stopPropagation();
            const pausedModal = document.querySelector('.modal-transform-paused');
            if (pausedModal) { pausedModal.classList.remove('modal-transform-paused'); }
            dom.enlargedImage.overlay.classList.add('hidden');
        }

        function addInteractiveEffects() {
            document.querySelectorAll('.ripple-effect').forEach(el => {
                if (el.dataset.rippleAttached) return;
                el.dataset.rippleAttached = 'true';
                el.addEventListener('click', function (e) {
                    const rect = this.getBoundingClientRect();
                    const ripple = document.createElement('span');
                    const size = Math.max(rect.width, rect.height);
                    ripple.style.width = ripple.style.height = `${size}px`;
                    ripple.style.left = `${e.clientX - rect.left - size / 2}px`;
                    ripple.style.top = `${e.clientY - rect.top - size / 2}px`;
                    ripple.classList.add('ripple');
                    const existingRipple = this.querySelector('.ripple');
                    if (existingRipple) existingRipple.remove();
                    this.appendChild(ripple);
                });
            });

            document.querySelectorAll('.character-card').forEach(card => {
                card.addEventListener('mouseenter', () => { card.style.transform = 'scale(1.05)'; });
                card.addEventListener('mouseleave', () => { card.style.transform = 'scale(1)'; });
            });
        }
        
        function setupEasterEgg() {
            const headerTitle = document.querySelector('header h1');
            let clickCount = 0;
            let clickTimer = null;

            headerTitle.addEventListener('click', () => {
                clickCount++;
                clearTimeout(clickTimer);
                clickTimer = setTimeout(() => { clickCount = 0; }, 1500);

                if (clickCount === 5) {
                    clickCount = 0;
                    if(state.isEasterEggMode) return;
                    const password = prompt("Sırrı fısılda...");
                    if (password === EASTER_EGG_PASSWORD) {
                        alert("Sırlar açığa çıktı!");
                        state.isEasterEggMode = true;
                        updateUI();
                        renderCharacters();
                    } else if (password !== null) {
                        alert("Yanlış fısıltı...");
                    }
                }
            });

            dom.easterEgg.indicator.addEventListener('click', (e) => {
                e.stopPropagation();
                if (confirm("Sırları tekrar gizlemek istiyor musun?")) {
                    state.isEasterEggMode = false;
                    if(state.galleryMode === 'easter-egg') {
                        state.galleryMode = 'all';
                        dom.filter.label.textContent = 'Tümü';
                    }
                    updateUI();
                    renderCharacters();
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            Object.assign(dom, {
                characterGrid: document.getElementById('character-grid'),
                characterModal: { element: document.getElementById('character-modal'), content: document.getElementById('character-modal-content'), name: document.getElementById('modal-character-name'), evolutions: document.getElementById('modal-evolutions'), fusionsContainer: document.getElementById('modal-fusions'), fusionList: document.getElementById('fusion-list'), prevBtn: document.getElementById('prev-char-btn'), nextBtn: document.getElementById('next-char-btn'), prevName: document.getElementById('prev-char-name'), nextName: document.getElementById('next-char-name') },
                fusionModal: { element: document.getElementById('fusion-modal'), content: document.getElementById('fusion-modal-content'), name: document.getElementById('modal-fusion-name'), image: document.getElementById('modal-fusion-image'), imageContainer: document.getElementById('fusion-main-image'), star: document.getElementById('modal-fusion-star'), leftChar: { image: document.getElementById('modal-fusion-left-char-image'), name: document.getElementById('modal-fusion-left-char-name'), starDisplay: document.getElementById('modal-fusion-left-char-star'), container: document.getElementById('fusion-partner-left') }, rightChar: { image: document.getElementById('modal-fusion-right-char-image'), name: document.getElementById('modal-fusion-right-char-name'), starDisplay: document.getElementById('modal-fusion-right-char-star'), container: document.getElementById('fusion-partner-right') }, prevBtn: document.getElementById('prev-fusion-btn'), nextBtn: document.getElementById('next-fusion-btn'), prevName: document.getElementById('prev-fusion-name'), nextName: document.getElementById('next-fusion-name') },
                easterEggModal: { element: document.getElementById('easter-egg-modal'), content: document.getElementById('easter-egg-modal-content'), name: document.getElementById('ee-modal-name'), newImage: document.getElementById('ee-modal-new-image'), originalImage: document.getElementById('ee-modal-original-image'), originalLabel: document.getElementById('ee-modal-original-label'), prevBtn: document.getElementById('prev-ee-btn'), nextBtn: document.getElementById('next-ee-btn'), prevName: document.getElementById('prev-ee-name'), nextName: document.getElementById('next-ee-name') },
                enlargedImage: { overlay: document.getElementById('enlarged-image-overlay'), image: document.getElementById('enlarged-image') },
                zoom: { outBtn: document.getElementById('zoom-out-btn'), inBtn: document.getElementById('zoom-in-btn'), label: document.getElementById('current-size-label') },
                layout: { toggleBtn: document.getElementById('fitToScreenToggleBtn') },
                filter: { toggleBtn: document.getElementById('filter-toggle-btn'), label: document.getElementById('filter-label'), menu: document.getElementById('filter-menu'), buttons: document.querySelectorAll('#filter-menu button') },
                search: { openBtn: document.getElementById('open-search-btn'), modal: document.getElementById('search-modal'), content: document.getElementById('search-modal-content'), input: document.getElementById('search-input'), resultsGrid: document.getElementById('search-results-grid'), placeholder: document.getElementById('search-placeholder') },
                easterEgg: { indicator: document.getElementById('easter-egg-indicator'), filterBtn: document.getElementById('easter-egg-filter-btn') }
            });
            
            dom.filter.toggleBtn.addEventListener('click', (e) => { e.stopPropagation(); dom.filter.menu.classList.toggle('hidden'); });
            dom.filter.buttons.forEach(button => {
                button.addEventListener('click', () => {
                    state.galleryMode = button.dataset.filter;
                    dom.filter.label.textContent = button.textContent;
                    dom.filter.menu.classList.add('hidden');
                    updateUI();
                    renderCharacters();
                });
            });

            dom.easterEgg.filterBtn.addEventListener('click', () => {
                state.galleryMode = 'easter-egg';
                updateUI();
                renderCharacters();
            });

            dom.search.openBtn.addEventListener('click', openSearchModal);
            dom.search.input.addEventListener('input', renderSearchResults);

            window.addEventListener('click', (e) => {
                if (!dom.filter.menu.classList.contains('hidden') && !e.target.closest('#filter-container')) {
                    dom.filter.menu.classList.add('hidden');
                }
            });
            
            dom.zoom.inBtn.addEventListener('click', () => { if (state.imageSizeIndex < sizeProfiles.length - 1) { state.imageSizeIndex++; updateUI(); renderCharacters(); } });
            dom.zoom.outBtn.addEventListener('click', () => { if (state.imageSizeIndex > 0) { state.imageSizeIndex--; updateUI(); renderCharacters(); } });
            dom.layout.toggleBtn.addEventListener('click', () => { state.isFitToScreenMode = !state.isFitToScreenMode; updateUI(); renderCharacters(); });

            setupEasterEgg();
            updateUI(); 
            renderCharacters(); 
        });
    </script>
</body>
</html>
